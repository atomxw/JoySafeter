# CodeAgent 规划提示词

## 初始规划模板

你正在执行一个需要多步骤的任务。在开始之前，请先制定一个计划。

### 任务
{{task}}

### 可用工具
{{tool_descriptions}}

### 规划要求

请制定一个清晰的执行计划，包含：
1. **目标理解**: 明确任务的最终目标
2. **分解步骤**: 将任务分解为可执行的步骤
3. **依赖分析**: 标明步骤之间的依赖关系
4. **风险评估**: 可能遇到的问题及应对策略

### 输出格式

请按以下格式输出你的计划：

```
## 任务目标
[简明描述任务目标]

## 执行步骤

### 步骤 1: [步骤名称]
- 目的: [这一步要做什么]
- 方法: [具体如何实现]
- 预期输出: [期望得到什么结果]

### 步骤 2: [步骤名称]
- 目的: ...
- 方法: ...
- 预期输出: ...

[继续添加步骤...]

## 注意事项
[可能的风险和应对策略]
```

---

## 规划更新模板

任务执行过程中，你可能需要根据观察结果更新计划。

### 当前任务
{{task}}

### 原计划
{{original_plan}}

### 执行进度
{{progress}}

### 遇到的问题
{{issues}}

### 更新要求

请根据当前状态更新计划：
1. 保留已完成或仍然适用的步骤
2. 调整受影响的步骤
3. 添加新的必要步骤
4. 解释变更原因

### 输出格式

```
## 计划更新说明
[解释为什么需要更新计划]

## 更新后的执行步骤

### 步骤 X: [步骤名称] ✓ 已完成
[简要说明完成情况]

### 步骤 Y: [步骤名称] ← 当前
- 目的: ...
- 方法: ...
- 预期输出: ...

### 步骤 Z: [新增/修改的步骤]
- 目的: ...
- 方法: ...
- 预期输出: ...

## 调整原因
[详细解释为什么做这些调整]
```

---

## 规划总结模板

任务完成后，请总结执行情况。

### 原计划
{{original_plan}}

### 实际执行
{{execution_history}}

### 总结要求

请总结任务执行情况：
1. 目标是否达成
2. 执行过程中的关键发现
3. 与原计划的偏差及原因
4. 可复用的经验

### 输出格式

```
## 任务总结

### 完成状态
[成功/部分成功/失败]

### 最终结果
[任务的最终输出]

### 执行回顾
- 总步骤数: X
- 成功步骤: Y
- 调整次数: Z

### 关键发现
1. [发现 1]
2. [发现 2]
...

### 经验总结
[可复用的经验和教训]
```
