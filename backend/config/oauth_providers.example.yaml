# OAuth/OIDC provider config example (copy to oauth_providers.yaml)
# Inject secrets via env vars: ${VAR_NAME}

providers:
  # GitHub (built-in template)
  github:
    enabled: false
    display_name: "GitHub"
    icon: "github"
    template: "github"
    client_id: ${OAUTH_GITHUB_CLIENT_ID}
    client_secret: ${OAUTH_GITHUB_CLIENT_SECRET}

  # Google (built-in template)
  google:
    enabled: false
    display_name: "Google"
    icon: "google"
    template: "google"
    client_id: ${OAUTH_GOOGLE_CLIENT_ID}
    client_secret: ${OAUTH_GOOGLE_CLIENT_SECRET}

  # Keycloak (custom OIDC)
  keycloak:
    enabled: false
    display_name: "企业 SSO"
    icon: "key"
    client_id: ${OAUTH_KEYCLOAK_CLIENT_ID}
    client_secret: ${OAUTH_KEYCLOAK_CLIENT_SECRET}
    issuer: "https://keycloak.example.com/realms/myrealm"
    scope: "openid email profile"
    user_mapping:
      id: "sub"
      email: "email"
      name: "name"
      avatar: "picture"

  # GitLab (custom OIDC)
  gitlab:
    enabled: false
    display_name: "GitLab"
    icon: "gitlab"
    client_id: ${OAUTH_GITLAB_CLIENT_ID}
    client_secret: ${OAUTH_GITLAB_CLIENT_SECRET}
    authorize_url: "https://gitlab.com/oauth/authorize"
    token_url: "https://gitlab.com/oauth/token"
    userinfo_url: "https://gitlab.com/api/v4/user"
    scope: "read_user"
    user_mapping:
      id: "id"
      email: "email"
      name: "name"
      avatar: "avatar_url"

  # Microsoft Entra ID (built-in template)
  microsoft:
    enabled: false
    display_name: "Microsoft"
    icon: "microsoft"
    template: "microsoft"
    client_id: ${OAUTH_MICROSOFT_CLIENT_ID}
    client_secret: ${OAUTH_MICROSOFT_CLIENT_SECRET}

  # Authentik (custom OIDC)
  authentik:
    enabled: false
    display_name: "Authentik SSO"
    icon: "shield"
    client_id: ${OAUTH_AUTHENTIK_CLIENT_ID}
    client_secret: ${OAUTH_AUTHENTIK_CLIENT_SECRET}
    issuer: "https://authentik.example.com/application/o/your-app/"
    scope: "openid email profile"
    user_mapping:
      id: "sub"
      email: "email"
      name: "name"
      avatar: "picture"

  # JD SSA (non-standard OAuth2)
  # Note: callback domain must be under *.jd.com or JD-allowed domains
  jd:
    enabled: false
    display_name: "JD SSO"
    icon: "building"
    protocol: "jd_sso"
    client_id: ${JD_CLIENT_ID}
    client_secret: ${JD_CLIENT_SECRET}
    authorize_url: ${JD_AUTHORIZE_URL}
    token_url: ""
    userinfo_url: ${JD_USERINFO_URL}
    scope: "openid email"
    user_mapping:
      id: "userId"
      email: "email"
      name: "username"
      avatar: ""

settings:
  default_redirect_url: "/chat"
  allow_registration: true
  auto_link_by_email: true
